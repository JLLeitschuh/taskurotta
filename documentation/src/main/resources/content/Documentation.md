## Формирование документации

Документация ведется в модуле проекта - documentation. Документация состоит из набора md файлов и файла описания ее содержания. Пример расположения файлов модуля:

    documentation
        main
            java
            resources
                content
                    Autotest.md
                    Documentation.md
                    FAQ.md
                    Glossary.md
                    Preface.md
                    WhatsNew.md
                documentation.index

### Содержание документации

Файл содержание (documentation.index) это список md файлов которые должны войти в итоговую документацию. Т.е. там могут быть не все md файлы. Например по причине не готовности некоторых для публикации. С помощью отступа можно формировать иерархическую структуру содержания. Пример:

    src/main/resources/content/Preface.md
        src/main/resources/content/FAQ.md
        src/main/resources/content/Glossary.md
    src/main/resources/content/WhatsNew.md
    src/main/resources/content/Documentation.md
    src/main/resources/content/Autotest.md

Во время формирования содержания извлекается первый заголовок md файла (строка следующая за символом \#). Эти заголовки используются в реальном содержании документации. Порядок элементов содержания будет соответствовать порядку ссылок на md файлы в documentation.index. Например, представленная выше иерархия будет соответствовать следующему содержанию:
 
    1. Предисловие
        1.1. Вопросы и ответы
        1.2. Глоссарий
    2. Что нового?
    3. Формирование документации
    4. Автоматическое тестирование
    
### Добавление нового раздела

Для добавления нового раздела необходимо создать новый файл md. Далее помещаем ссылку на него в нужном месте индекса documentation.index.

### Процесс формирования документации

Формирование документации происходит при maven сборки проекта. В результате сборки, в директории target/classes/assets/documentation появляются два файла - documentation.html и menu.json. Это файлы готового html представления документации и json документ описывающий его содержание. В представленном выше примере содержание json документа будет следующим:

    [
        {
            "anchor":"Preface.md",
            "caption":"Предисловие",
            "children":[
                {
                    "anchor":"FAQ.md",
                    "caption":"Вопросы и ответы",
                    "children":[]
                },
                {
                    "anchor":"Glossary.md",
                    "caption":"Глоссарий",
                    "children":[]
                }]
        },
        {
            "anchor":"WhatsNew.md",
            "caption":"Что нового?",
            "children":[]
        },
        {
            "anchor":"Documentation.md",
            "caption":"Формирование документации",
            "children":[]
        },
        {
            "anchor":"Autotest.md",
            "caption":"Автоматическое тестирование",
            "children":[]
        }
    ]

Html представление документации имеет расставленные якоря соответствующие полям anchor в документе json. 

При сборке проекта, эти файлы помещаются в соответствующую директорию статических файлов консоли. Добавлен пункт меню "Documentation" при переходе на который файлы динамически подгружаются и формируют содержание с документацией готовое для использования.
