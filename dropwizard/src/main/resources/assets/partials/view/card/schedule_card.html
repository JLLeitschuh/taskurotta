<div>
    <table width="100%" class="well">
        <tr>
            <td style="text-align: left; padding:10px;">
                <h4>Create scheduled task</h4>
            </td>
            <td style="text-align: right;"><a class="btn btn-link" ng-click="back()">Back</a></td>
        </tr>
    </table>
    <div ng-if="feedback.status>=500">
        <tsk-err-message model="feedback"></tsk-err-message>
    </div>
    <div ng-if="!initialized">
        <img src="/img/ajax-loader.gif"/>
    </div>
    <table width="100%" ng-if="initialized">
        <tr>
            <td style="vertical-align: top; width: 430px;">
                <div class="well">
                    <h4>Job properties:</h4>
                    <table class="table table-condensed">
                        <tr>
                            <td style="width: 200px;">
                                <span style="cursor:pointer;" popover="Specify the human readable name of the job."
                                      popover-placement="right" class="badge badge-info">?</span>
                                <b>Job name:</b>
                            </td>
                            <td>
                                <input class="input search-query" type="text" ng-model="job.name" required />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="cursor:pointer;" popover="Cron expression to trigger task."
                                      popover-placement="right" class="badge badge-info">?</span>
                                <b>Cron:</b>
                            </td>
                            <td>
                                <input class="input-small search-query" type="text" ng-model="job.cron" ng-change="validateCron()" required />
                                <span ng-if="job.cron.length>0 && isCronValid" popover="Valid cron expression" popover-trigger="mouseenter" class="icon-thumbs-up" ></span>
                                <span ng-if="job.cron.length>0 && !isCronValid" popover = "Incorrect cron expression" popover-trigger="mouseenter" class="icon-thumbs-down"></span>

                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="cursor:pointer;" popover="Max tasks count per actor queue. If queue size exceeds that value on current scheduler iteration, scheduler would just skip until queue is ready. Use negative or zero value to disable this option."
                                      popover-placement="right" class="badge badge-info">?</span>
                                <b>Queue limit:</b>
                            </td>
                            <td>
                                <input style="outline: 0" class="input-mini search-query" ng-model="job.queueLimit" /><span ng-if="job.queueLimit<=0" class="muted"><small>disabled</small></span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="cursor:pointer;" popover="The job would stop after exceeding this number of attempts to create task interrupted due to error. Note that it doesn't concern task execution on actor itself. Use negative or zero value to disable this option."
                                      popover-placement="right" class="badge badge-info">?</span>
                                <b>Max errors:</b>
                            </td>
                            <td>
                                <input style="outline: 0" class="input-mini search-query" ng-model="job.maxErrors" /><span ng-if="job.maxErrors<=0" class="muted"><small>disabled</small></span>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
            <td style="vertical-align: top;">
                <div class="well">
                    <h4>Task properties:</h4>
                    <table class="table">
                        <tr>
                            <td>
                                <span style="cursor:pointer;" popover="ActorId of the actor to trigger."
                                      popover-placement="right" class="badge badge-info">?</span>
                                <b>ActorId:</b>
                            </td>
                            <td>
                                <input class="input-large search-query" type="text" ng-model="job.task.actorId" required/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="cursor:pointer;" popover="Method of the actor to trigger."
                                      popover-placement="right" class="badge badge-info">?</span>
                                <b>Method name:</b>
                            </td>
                            <td>
                                <input class="input-large search-query" type="text" ng-model="job.task.method" required/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="cursor:pointer;" popover="Type of the actor to trigger."
                                      popover-placement="right" class="badge badge-info">?</span>
                                <b>Actor type:</b>
                            </td>
                            <td>
                                <select ng-model="job.task.type" ng-options="type for type in types" required />
                            </td>
                        </tr>

                        <!--<tr>-->
                            <!--<td>-->
                                <!--<span style="cursor:pointer;" popover="Arguments for the actor invokation. Should be represented as valid JSON string."-->
                                      <!--popover-placement="right" class="badge badge-info">?</span>-->
                                <!--<b>Args JSON:</b>-->
                            <!--</td>-->
                            <!--<td>-->
                                <!--<textarea ng-model="task.argsJson"></textarea>-->
                            <!--</td>-->
                        <!--</tr>-->
                    </table>
                </div>
            </td>
        </tr>

        <tr>
            <td></td>
            <td>
                <a class="btn" ng-click="updateScheduledJob()" ng-disabled="!isValidForm()" ng-if="job.id>0 && job.status!=1">Update task</a>
                <span ng-if="job.id>0 && job.status==1" class="alert alert-danger">You should stop job before edit <a class="btn-link" ng-href="#/schedule/list">Back to list</a></span>
                <a class="btn" ng-click="createScheduledJob()" ng-disabled="!isValidForm()" ng-if="!job.id">Create scheduled task</a>
            </td>
        </tr>
    </table>

</div>