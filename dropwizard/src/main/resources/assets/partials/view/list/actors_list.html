<div>
    <table width="100%" class="well">
        <tr>
            <td style="text-align: left; padding:10px;">
                <h4>Actors list</h4>
            </td>
            <td style="text-align: right;"><a class="btn btn-link" ng-click="back()">Back</a></td>
        </tr>
    </table>

    <div ng-if="feedback.status>=500">
        <tsk-err-message model="feedback"></tsk-err-message>
    </div>

    <div class="well" style="margin:5px;">
        <div style="float: right;">
            <img id="loading" src="/img/ajax-loader.gif" style="display: none;"/>
            <a class="btn btn-small" ng-click="update()" popover="Refresh list" popover-trigger="mouseenter"><i class="icon-refresh"></i></a>
        </div>

        <table class="table table-striped table-bordered table-hover">

            <thead>
                <th style="width: 40px;"><small>â„–</small></th>
                <th><small>Actor ID</small></th>
                <th style="width: 120px;"><small>Queue balance</small></th>
                <th style="width: 180px;"><small>Last activity</small></th>
                <th style="width: 50px;"><small>Actions</small></th>
            </thead>

            <tbody>
                <tr ng-if="!initialized">
                    <td colspan="4" style="text-align: center;"><img src="/img/ajax-loader.gif"/></td>
                </tr>
                <tr ng-repeat="actor in actorsPage.items">
                    <td>
                        {{getStartIndex(actorsPage.pageNumber, actorsPage.pageSize) + $index}}
                    </td>

                    <td>
                        <a class="btn btn-link"><small>{{actor.actorId}}</small></a>
                    </td>

                    <td>
                        <div ng-if="actor.queueState">
                            <small>
                                <span ng-if="actor.queueState.outHour>=0 && actor.queueState.inHour>=0">
                                    <b class="muted">Last hour:</b>
                                    <b ng-if="actor.queueState.outHour<actor.queueState.inHour" style="color: red;" popover="Warning: overwhelming income" popover-trigger="mouseenter">&#x25B2;</b>
                                    <b ng-if="actor.queueState.outHour>=actor.queueState.inHour" style="color: green;" popover="Decreasing (stable)" popover-trigger="mouseenter">&#x25BC;</b>
                                    <br />in: <b ng-if="actor.queueState.inHour>=0">{{actor.queueState.inHour}}</b>, out: <b ng-if="actor.queueState.outHour>=0">{{actor.queueState.outHour}}</b>
                                </span>

                                <br />

                                <span ng-if="actor.queueState.outDay>=0 && actor.queueState.inDay>=0">
                                    <br />
                                    <b class="muted">Last day:</b>
                                    <b ng-if="actor.queueState.outDay<actor.queueState.inDay" style="color: red;" popover="Warning: overwhelming income" popover-trigger="mouseenter">&#x25B2;</b>
                                    <b ng-if="actor.queueState.outDay>=actor.queueState.inDay" style="color: green;" popover="Decreasing (stable)" popover-trigger="mouseenter">&#x25BC;</b>
                                    <br />in: <b ng-if="actor.queueState.inDay>=0">{{actor.queueState.inDay}}</b>, out: <b ng-if="actor.queueState.outDay>=0">{{actor.queueState.outDay}}</b>
                                </span>
                            </small>
                        </div>
                    </td>

                    <td>
                        <small><b class="muted">Poll:</b> {{ actor.lastPoll || "n/a" | date:'dd-MM-yyyy HH:mm:ss' }}</small>
                            <br />
                        <small><b class="muted">Release:</b> {{ actor.lastRelease || "n/a" | date:'dd-MM-yyyy HH:mm:ss' }}</small>
                    </td>

                    <td>
                        <table cellpadding="0" cellspacing="0">
                            <tr>
                                <td>
                                    <label class="checkbox"><input type="checkbox" disabled /><a class="btn-link" disabled><small>Compare</small></a></label>
                                </td>
                                <td ng-if="actor.block">
                                    <a class="btn" disabled><small>Unblock</small></a>
                                </td>
                                <td ng-if="!actor.block">
                                    <a class="btn" disabled><small>Block</small></a>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </tbody>

            <tfoot>
                <td colspan="4">
                    <div tsk-paginator generic-page="actorsPage" update-action="update()"></div>
                </td>
            </tfoot>

        </table>

        <div>
            <table cellpadding="0" cellspacing="0" border="0" width="100%">
                <tr>
                    <td style="text-align:left;">
                        <div>Total: <b>{{actorsPage.totalCount || 0}}</b> actors</div>
                    </td>
                    <td style="text-align:right;">
                        <div>
                            <a ng-href="" class="btn btn-small" type="button" disabled><b>Compare</b></a>
                        </div>
                    </td>
                </tr>
            </table>

        </div>

    </div>

</div>
